#!/bin/sh

# BRANCH NAMING: Enforce branch naming convention
.husky/validate-branch-name.sh

# PULL CHANGES FROM MAIN: Ensure the branch is up to date with main
BRANCH_NAME=$(git symbolic-ref --short HEAD)
if [ "$BRANCH_NAME" != "main" ]; then
  # Check if origin/main exists before comparing
  if git show-ref --quiet --verify refs/remotes/origin/main; then
    if ! git diff --quiet origin/main..HEAD; then
      echo "ERROR: Your branch is not up to date with origin/main. Please pull the latest changes from main before pushing."
      exit 1
    fi
  fi
fi